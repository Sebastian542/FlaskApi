<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Ferretería Mejorada</title>
    <style>
        /* mismo estilo que antes */
    </style>
</head>
<body>

    <h1>Ferretería Mejorada</h1>

    <div class="section">
        <form action="/agregar_categoria" method="post">
            <h2>Agregar Categoría</h2>
            <label>Nombre Categoría</label>
            <input type="text" name="nombre_categoria" required />
            <button type="submit">Agregar Categoría</button>
        </form>

        <h2>Lista de Categorías</h2>
        <table>
            <thead>
                <tr><th>ID</th><th>Nombre Categoría</th></tr>
            </thead>
            <tbody>
                {% for cat in categorias %}
                <tr>
                    <td>{{ cat.id }}</td>
                    <td>{{ cat.nombre_categoria }}</td>
                </tr>
                {% else %}
                <tr><td colspan="2">No hay categorías.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="section">
        <form action="/agregar_producto" method="post">
            <h2>Agregar Producto</h2>
            <label>Nombre</label>
            <input type="text" name="nombre" required />
            <label>Descripción</label>
            <textarea name="descripcion" rows="2"></textarea>
            <label>Stock</label>
            <input type="number" name="stock" min="0" required />
            <label>Precio</label>
            <input type="number" step="0.01" name="precio" min="0" required />
            <label>Categoría</label>
            <select name="id_categoria" required>
                <option value="">--Seleccione--</option>
                {% for categoria in categorias %}
                    <option value="{{ categoria.id }}">{{ categoria.nombre_categoria }}</option>
                {% endfor %}
            </select>
            <button type="submit">Agregar Producto</button>
        </form>

        <h2>Lista de Productos</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th><th>Nombre</th><th>Descripción</th><th>Stock</th><th>Precio</th><th>Categoría</th>
                </tr>
            </thead>
            <tbody>
                {% for p in productos %}
                <tr>
                    <td>{{ p.id }}</td>
                    <td>{{ p.nombre }}</td>
                    <td>{{ p.descripcion }}</td>
                    <td>{{ p.stock }}</td>
                    <td>{{ "%.2f"|format(p.precio) }}</td>
                    <td>{{ p.nombre_categoria if p.nombre_categoria else 'N/A' }}</td>
                </tr>
                {% else %}
                <tr><td colspan="6">No hay productos.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="section">
        <form action="/agregar_cliente" method="post">
            <h2>Agregar Cliente</h2>
            <label>Nombre Completo</label>
            <input type="text" name="nombre_completo" required />
            <label>Teléfono</label>
            <input type="text" name="telefono" />
            <label>Email</label>
            <input type="email" name="email" />
            <label>Dirección</label>
            <input type="text" name="direccion" />
            <label>Documento</label>
            <input type="text" name="documento" />
            <label>Tipo Cliente (ID)</label>
            <input type="number" name="tipo_cliente_id" />
            <button type="submit">Agregar Cliente</button>
        </form>

        <h2>Lista de Clientes</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th><th>Nombre Completo</th><th>Teléfono</th><th>Email</th><th>Dirección</th><th>Documento</th><th>Tipo Cliente</th>
                </tr>
            </thead>
            <tbody>
                {% for c in clientes %}
                <tr>
                    <td>{{ c.id }}</td>
                    <td>{{ c.nombre_completo }}</td>
                    <td>{{ c.telefono }}</td>
                    <td>{{ c.email }}</td>
                    <td>{{ c.direccion }}</td>
                    <td>{{ c.documento }}</td>
                    <td>{{ c.tipo_cliente_id }}</td>
                </tr>
                {% else %}
                <tr><td colspan="7">No hay clientes.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</body>
</html>
